# Remission

Кроссплатформенный клиент (iOS + macOS) для удалённого управления Transmission через RPC.

## О проекте

**Remission** — это быстрый, удобный и безопасный интерфейс для мониторинга и управления торрентами на удалённом хосте. Приложение поддерживает подключение к одному или нескольким серверам Transmission, просмотр и управление торрентами, добавление `.torrent` и `magnet` ссылок, а также безопасное хранение учётных данных в Keychain.

## Системные требования

### Инструменты разработки

| Инструмент | Версия | Примечание |
|-----------|--------|-----------|
| **Xcode** | 16.0 или выше | Рекомендуется для сборки и тестирования |
| **Swift Compiler** | 6.0 или выше | Поддержка Swift 6 (strict concurrency) |
| **Swift Package Manager** | 5.9 или выше | Встроен в Xcode |

### Целевые платформы (Deployment Targets)

| Платформа | Минимальная версия | Примечание |
|-----------|------------------|-----------|
| **iOS** | 17.0 или выше | iPhone, iPad |
| **macOS** | 14.0 или выше | Intel, Apple Silicon |

*Примечание: В файле проекта могут быть указаны более высокие версии для экспериментальных целей (например, 26.0).*

## Быстрый старт

### Открыть проект в Xcode

```bash
open Remission.xcodeproj
```

Затем выберите схему `Remission` и запустите на симуляторе или устройстве.

### Первая установка (рекомендуется)

#### 1. Установить инструменты контроля качества

```bash
brew install swift-format swiftlint gh
```

#### 2. Настроить git pre-commit hook

Запустите скрипт для установки git hook'а, который будет проверять код перед каждым коммитом:

```bash
bash Scripts/prepare-hooks.sh
```

#### 3. Настроить GitHub CLI (для релизов)

```bash
gh auth login
```

## Архитектура и технологии

Проект построен на современных стандартах Apple-разработки:

- **The Composable Architecture (TCA)**: управление состоянием и побочными эффектами.
- **SwiftUI**: декларативный интерфейс для iOS и macOS.
- **Swift 6 Strict Concurrency**: полная безопасность многопоточности.
- **Keychain**: безопасное хранение паролей и токенов.

### Структура проекта

```
Remission/
├── Remission/              # Исходный код приложения
│   ├── App/                # Глобальное состояние и зависимости (AppFeature, AppBootstrap)
│   ├── Features/           # Логика фич (TCA Reducers)
│   │   ├── ServerList/     # Управление списком серверов
│   │   ├── ServerDetail/   # Экран сервера и список торрентов
│   │   ├── TorrentAdd/     # Добавление новых торрентов
│   │   ├── TorrentDetail/  # Информация о конкретном торренте
│   │   ├── Diagnostics/    # Логи и диагностика
│   │   └── Settings/       # Настройки приложения
│   ├── Views/              # UI компоненты (SwiftUI)
│   ├── Domain/             # Модели данных и маппинг RPC
│   ├── Repositories/       # Работа с хранилищами (серверы, настройки)
│   ├── DependencyClients/  # Интерфейсы зависимостей
│   └── DependencyClientLive/ # Реальные реализации зависимостей
├── RemissionTests/         # Unit-тесты (Swift Testing)
├── RemissionUITests/       # UI-тесты
├── Doc/                    # Документация проекта
│   └── ReleaseGuide.md     # Руководство по выпуску релизов
├── Scripts/                # Вспомогательные скрипты
└── Templates/              # Шаблоны для разработки
```

## Контроль качества

Подробная информация о стандартах кодирования доступна в **[CONTRIBUTING.md](CONTRIBUTING.md)**.

### Проверка кода

```bash
# Форматирование
swift-format format --in-place --configuration .swift-format --recursive .

# Линтинг
swiftlint lint --fix
```

### Тестирование

```bash
# Запуск всех тестов
xcodebuild test -scheme Remission -destination 'platform=iOS Simulator,name=iPhone 17'
```

## Релизы и публикация

Для выпуска новых версий используется скрипт `Scripts/release_local.sh`. Он автоматизирует сборку, создание тегов и публикацию на GitHub.

Подробная инструкция: **[Doc/ReleaseGuide.md](Doc/ReleaseGuide.md)**.

Пример команды для создания черновика предрелиза:
```bash
./Scripts/release_local.sh --bump patch --tag --push --github-release --pre-release --draft
```

---

## Лицензия

Проект распространяется под лицензией, указанной в LICENSE файле (если присутствует).

## Связь

Для вопросов и предложений обратитесь к владельцу проекта или создайте issue в репозитории.