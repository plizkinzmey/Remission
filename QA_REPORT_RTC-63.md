# üîç –û—Ç—á—ë—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ RTC-63: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

**–î–∞—Ç–∞:** 9 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ö–ê–ß–ï–°–¢–í–û –í–´–°–û–ö–û–ï** (–≥–æ—Ç–æ–≤–æ –∫ merge)  
**–û—Ü–µ–Ω–∫–∞:** 85/100

---

## üìã –†–µ–∑—é–º–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è RTC-63 **—É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è** –∏–∑ PRD/plan.md. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç TCA –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º, —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç happy/error paths, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞. –í—ã—è–≤–ª–µ–Ω—ã 2 –º–∏–Ω–æ—Ä–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π.

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|----------|--------|--------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ TCA** | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é | @ObservableState, Action enum, @Reducer, Dependencies |
| **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é | –í—Å–µ 6 –∑–∞–¥–∞—á —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ 4 —Ç–µ—Å—Ç–∞ | happy path, error path, HTTP warning, reset trust |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è | –ù–µ—Ç —É—Ç–µ—á–µ–∫ credentials, Keychain, HttpWarningPreferencesStore |
| **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ Swift 6 | –ë–∏–ª—å –∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ |
| **UI/UX** | ‚úÖ –•–æ—Ä–æ—à–∞ | –õ–æ–≥–∏—á–Ω—ã–π –ø–æ—Ç–æ–∫, –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å PRD/plan.md —Å UI-—Ç–µ–∫—Å—Ç–∞–º–∏ |

---

## 1Ô∏è‚É£ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ TCA (85/100)

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

- **OnboardingReducer**: –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω —Å @ObservableState, enum Action, @Reducer body
  ```swift
  @Reducer
  struct OnboardingReducer {
    @ObservableState struct State: Equatable { ... }
    enum Action: BindableAction, Equatable { ... }
    @Dependency var serverConnectionProbe
    var body: some Reducer<State, Action> { ... }
  }
  ```

- **–í–ª–æ–∂–µ–Ω–Ω—ã–π TrustPromptReducer**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–¥–µ–ª—ë–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `.ifLet` –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
  - State: `@Presents var trustPrompt: TrustPromptReducer.State?`
  - –ö–æ–º–ø–æ–∑–∏—Ü–∏—è: `.ifLet(\.$trustPrompt, action: \.trustPrompt) { TrustPromptReducer() }`

- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –≤—Å–µ –∏–Ω—ä–µ—Ü–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ @Dependency (5 —à—Ç)
  - `serverConnectionProbe` ‚úÖ
  - `transmissionTrustPromptCenter` ‚úÖ
  - `httpWarningPreferencesStore` ‚úÖ
  - `credentialsRepository` ‚úÖ
  - `onboardingProgressRepository` ‚úÖ

- **ServerConnectionProbe**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–¥–µ–ª—ë–Ω (–Ω–µ –≤ reducer-–µ), –∏–Ω—ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ dependency, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç trustHandler

- **ServerDetailReducer**: –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π, —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º alert

### ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è**: `ConnectionStatus` –º–æ–≥–ª–∞ –±—ã –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ —á–∞—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ enum –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏:
```swift
// –¢–µ–∫—É—â–µ–µ (—Ö–æ—Ä–æ—à–æ, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å):
case success(TransmissionHandshakeResult)

// –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–µ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:
case success(ConnectionData)  // –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç handshake + metadata
```
–î–ª—è MVP —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ, –Ω–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–ª–µ–¥—É–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å.

---

## 2Ô∏è‚É£ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (90/100)

### ‚úÖ –í—Å–µ 6 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

**–ó–∞–¥–∞—á–∞ 1: –≠–∫—à–µ–Ω checkConnectionButtonTapped + –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç**
- ‚úÖ `case .checkConnectionButtonTapped` ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç `startConnectionProbe()`
- ‚úÖ `startConnectionProbe()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç `.run { send in ... }` —ç—Ñ—Ñ–µ–∫—Ç
- ‚úÖ Retry —Å exponential backoff (—á–µ—Ä–µ–∑ `ServerConnectionProbe`)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: HTTP 409, 401, —Ç–∞–π–º–∞—É—Ç—ã —á–µ—Ä–µ–∑ `ProbeError`

**–ó–∞–¥–∞—á–∞ 2: –°—Ç–µ–π—Ç-–º–∞—à–∏–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ + UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**
- ‚úÖ `ConnectionStatus: .idle | .testing | .success(handshake) | .failed(message)`
- ‚úÖ UI –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ –≤ `OnboardingView/statusSection`
  - `.idle` ‚Üí "–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å"
  - `.testing` ‚Üí ProgressView —Å "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è..."
  - `.success` ‚Üí Label —Å –≤–µ—Ä—Å–∏–µ–π —Å–µ—Ä–≤–µ—Ä–∞ (–∑–µ–ª—ë–Ω—ã–π)
  - `.failed` ‚Üí Text —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ (–∫—Ä–∞—Å–Ω—ã–π)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ó–∞–¥–∞—á–∞ 3: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ HTTP + "–ù–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å"**
- ‚úÖ –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ transport –Ω–∞ `.http` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º AlertState
- ‚úÖ –ß–µ–∫–±–æ–∫—Å "–ù–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å" ‚Üí `suppressInsecureWarning: Bool`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `HttpWarningPreferencesStore` (per-server fingerprint)
- ‚úÖ –ü—Ä–∏ –æ—Ç–º–µ–Ω–µ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–∑–≤—Ä–∞—Ç –∫ HTTPS
- ‚úÖ –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ ‚Üí –≤—ã–∑–æ–≤ `startConnectionProbe()` —Å `forceAllowInsecureTransport: true`

**–ó–∞–¥–∞—á–∞ 4: TransmissionTrustPromptCenter + self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**
- ‚úÖ `trustPromptCenter.makeHandler()` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ probe
- ‚úÖ `listenForTrustPrompts()` —ç—Ñ—Ñ–µ–∫—Ç —Å–ª—É—à–∞–µ—Ç –≤ —Ñ–æ–Ω–µ —á–µ—Ä–µ–∑ `trustPromptCenter.prompts`
- ‚úÖ –ü—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ prompt ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º `TransmissionTrustPromptView`
- ‚úÖ –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ ‚Üí `.trustPermanently`, –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ ‚Üí `.deny`
- ‚úÖ –ü–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä—è–µ–º probe –±–µ–∑ –∞–ª–µ—Ä—Ç–∞

**–ó–∞–¥–∞—á–∞ 5: ServerDetailReducer + HTTP –±–µ–π–¥–∂ + —Å–±—Ä–æ—Å –¥–æ–≤–µ—Ä–∏—è**
- ‚úÖ HTTP —Å–µ—Ä–≤–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ä–∞–Ω–∂–µ–≤—ã–π –±–µ–π–¥–∂ "HTTP (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ)" –≤ —Å–ø–∏—Å–∫–µ
- ‚úÖ `resetTrustButtonTapped` ‚Üí AlertState —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- ‚úÖ –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏: –æ—á–∏—â–∞–µ–º `HttpWarningPreferencesStore` + `TransmissionTrustStoreClient`
- ‚úÖ UI –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–± —É–¥–∞–ª–µ–Ω–∏–∏ fingerprint'–æ–≤

**–ó–∞–¥–∞—á–∞ 6: Retry/timeout –ø–æ–ª–∏—Ç–∏–∫–∞ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- ‚úÖ `ServerConnectionProbe.live()` –∏–º–µ–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `maxAttempts: Int = 3`
  - `initialDelay: Duration = .seconds(1)`
  - Exponential backoff: `delay *= 2`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `TransmissionLogger` –±–µ–∑ —É—Ç–µ—á–∫–∏ credentials
- ‚úÖ `logger.logError(method: "session-get", error: error)` ‚Äì –±–µ–∑–æ–ø–∞—Å–Ω–æ

### ‚ö†Ô∏è –ú–µ–ª–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–µ–∫—Å—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è HTTP**: "–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω—ã. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?" ‚Äì —Ö–æ—Ä–æ—à–æ, –Ω–æ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å PRD —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–æ–π "HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–æ–≤–µ—Ä—è–µ—Ç–µ —Å–µ—Ç–∏." (—Å–ª–µ–¥—É–µ—Ç –≤—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É –≤–µ—Ä—Å–∏—é –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏)

2. **–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ**: –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è `connectionStatus = .idle` ‚úÖ, –Ω–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é "–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞" –≤–º–µ—Å—Ç–æ .idle

---

## 3Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (80/100)

### ‚úÖ –¢–µ—Å—Ç—ã Swift Testing (@Test)

| –¢–µ—Å—Ç | –ü—É—Ç—å | –°—Ç–∞—Ç—É—Å | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|------|------|--------|---------|
| **connectSuccess** | `OnboardingFeatureTests` | ‚úÖ Happy path | –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ |
| **httpWarningCanBeCancelled** | `OnboardingFeatureTests` | ‚úÖ HTTP warning + cancel | –û—Ç–º–µ–Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ HTTP |
| **connectionFailureShowsError** | `OnboardingFeatureTests` | ‚úÖ Error path | –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è |
| **resetTrustClearsStores** | `ServerDetailFeatureTests` | ‚úÖ Trust reset | –û—á–∏—Å—Ç–∫–∞ Keychain + preferences |

–í—Å–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `TestStore` —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ `withDependencies`.

### ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é coverage

1. **Self-signed certificate acceptance**: –Ω—É–∂–µ–Ω —Ç–µ—Å—Ç –≤ `OnboardingFeatureTests` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ç–æ–∫–∞:
   - Probe –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É trust
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º `TransmissionTrustPromptView`
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è fingerprint
   - Probe –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
   
   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç `acceptSelfSignedCertificateAndRetry()`

2. **Invalid port validation**: —Ç–µ–∫—É—â–∏–µ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (`port: 0`, `port: 65536`). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–æ—Ä–Ω—ã–π —é–Ω–∏—Ç-—Ç–µ—Å—Ç.

3. **–ü–æ–∫—Ä—ã—Ç–∏–µ `ServerConnectionProbe`**: –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è retry –ª–æ–≥–∏–∫–∏ –∏ exponential backoff. –•–æ—Ä–æ—à–æ –±—ã –¥–æ–±–∞–≤–∏—Ç—å:
   ```swift
   @Test("Exponential backoff —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏")
   func exponentialBackoffIncreases() async { ... }
   ```

**–¢–µ–∫—É—â–µ–µ –æ—Ü–µ–Ω–∏–≤–∞–µ–º–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: ~65% –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (OnboardingReducer, ServerConnectionProbe) ‚Äì **–≤—ã—à–µ –º–∏–Ω–∏–º—É–º–∞ 60%** ‚úÖ

---

## 4Ô∏è‚É£ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (95/100)

### ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

- **Credentials –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è**: `ServerConnectionProbe` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `logger.logError()` –±–µ–∑ password/username
- **Keychain –¥–ª—è secrets**: `TransmissionServerCredentials` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `credentialsRepository` ‚Üí Keychain
- **Per-server HTTP warnings**: `HttpWarningPreferencesStore.isSuppressed(fingerprint)` –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ `ServerConfig.makeFingerprint()` ‚Äì –Ω–µ –≤–∏–¥–Ω–æ —Ö–æ—Å—Ç–∞/–ø–∞—Ä–æ–ª—è –≤ logs
- **Trust evaluation**: `TransmissionTrustEvaluator` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, `TransmissionTrustStore` —Ö—Ä–∞–Ω–∏—Ç –æ—Ç–ø–µ—á–∞—Ç–∫–∏ –≤ Keychain

### ‚ö†Ô∏è –ú–µ–ª–∫–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ

**–ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ**: –ø—Ä–∏ –æ—à–∏–±–∫–µ –¥–æ–≤–µ—Ä–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É message –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å hostname:
```swift
challenge.identity.canonicalIdentifier  // –º–æ–∂–µ—Ç –±—ã—Ç—å "nas.local:9091"
```
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ (–Ω–µ credentials), –Ω–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –±–µ–∑ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Äì –ø—Ä–∏–µ–º–ª–µ–º–∞.

---

## 5Ô∏è‚É£ UI/UX (85/100)

### ‚úÖ –•–æ—Ä–æ—à–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- **OnboardingView**:
  - –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" –∞–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `isFormValid && connectionStatus != .testing`
  - –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Ä–≤–µ—Ä" –∞–∫—Ç–∏–≤–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (`verifiedSubmission != nil`)
  - –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ–∫—Ü–∏–∏
  - HTTP warning –∞–ª–µ—Ä—Ç –ø–æ–Ω—è—Ç–Ω—ã–π –∏ –¥–µ–π—Å—Ç–≤–µ–Ω–Ω—ã–π

- **ServerDetailView**:
  - HTTP —Å–µ—Ä–≤–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ä–∞–Ω–∂–µ–≤—ã–π –±–µ–π–¥–∂ "HTTP (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ)"
  - –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å –¥–æ–≤–µ—Ä–∏–µ" –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ–∫—Ü–∏–∏
  - –ê–ª–µ—Ä—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º

- **TransmissionTrustPromptView**:
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç CN, hostname, SHA-256 fingerprint –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
  - –ö–Ω–æ–ø–∫–∏ "–û—Ç–º–µ–Ω–∞" –∏ "–î–æ–≤–µ—Ä—è—Ç—å" —è—Å–Ω—ã
  - –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å –æ—Ä–∞–Ω–∂–µ–≤—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "–ù–µ–Ω–∞–¥—ë–∂–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç"

### ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ UX

1. **Feedback –ø—Ä–∏ retry**: –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ (–ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏), –±—ã–ª–æ –±—ã —Ö–æ—Ä–æ—à–æ –ø–æ–∫–∞–∑–∞—Ç—å "–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..." –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä—ã–≤–∞–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π –æ—à–∏–±–∫–∏

2. **Timeout message**: —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –º–æ–∂–µ—Ç –±—ã—Ç—å "timeout" ‚Äì —Ö–æ—Ä–æ—à–æ –±—ã –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å:
   ```swift
   case .handshakeFailed(let message):
       return message  // –ª—É—á—à–µ: "–ò—Å—Ç–µ–∫–ª–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è" –≤–º–µ—Å—Ç–æ "timeout"
   ```

---

## 6Ô∏è‚É£ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∏–ª—å (90/100)

### ‚úÖ Swift 6 compliant

- –ö–æ–¥ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω —Å `swift-format` ‚úÖ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `@Sendable` –¥–ª—è –∑–∞–º—ã–∫–∞–Ω–∏–π ‚úÖ
- `@unchecked Sendable` –¥–ª—è `LockedValue` —Å `NSLock` ‚Äì –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ
- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞, —Ö–æ—Ä–æ—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ ‚úÖ

### ‚ö†Ô∏è –ú–µ–ª–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–î–ª–∏–Ω–Ω—ã–µ lines**: –≤ `startConnectionProbe()` –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∏ > 100 —Å–∏–º–≤–æ–ª–æ–≤, –Ω–æ —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è Swift 6
2. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**: —Ö–æ—Ä–æ—à–æ –±—ã –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—â–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø—É–±–ª–∏—á–Ω—ã–º –º–µ—Ç–æ–¥–∞–º –≤ `ServerConnectionProbe`:
   ```swift
   /// –í—ã–ø–æ–ª–Ω—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º Transmission.
   /// –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff.
   /// - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
   ///   - request: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–∞—Ä–æ–ª—å
   ///   - trustHandler: –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ—à–µ–Ω–∏–π –æ –¥–æ–≤–µ—Ä–∏–∏ –∫ self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º
   static func live(...) -> ServerConnectionProbe { ... }
   ```

---

## 7Ô∏è‚É£ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (85/100)

### ‚úÖ –•–æ—Ä–æ—à–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ

- `OnboardingReducer` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å `OnboardingProgressRepository` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
- `ServerConnectionProbe` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `TransmissionClient` –∏ –µ–≥–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- `HttpWarningPreferencesStore` —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω —Å `ServerConfig.makeFingerprint()`
- `ServerDetailReducer` –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π UI
- –í—Å–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ `AppDependencies.swift`

### ‚ö†Ô∏è –ó–∞–º–µ—á–∞–Ω–∏–µ

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ AppDependencies**: –Ω–æ–≤—ã–µ dependencies –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
```swift
dependencies.httpWarningPreferencesStore = .inMemory()
dependencies.transmissionTrustStoreClient = .placeholder
dependencies.serverConnectionProbe = .placeholder
```
–ù–æ –¥–ª—è production –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `.liveValue` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `makeLive()` ‚úÖ (—Å–º–æ—Ç—Ä–µ–ª ‚Äì –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ —è–≤–Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö defaults)

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|----------|--------|
| –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è PRD/plan.md | 6/6 ‚úÖ | –ü–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω—ã |
| –¢–µ—Å—Ç—ã (happy path) | 4 ‚úÖ | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ |
| –¢–µ—Å—Ç—ã (error path) | 3 ‚úÖ | –•–æ—Ä–æ—à–æ |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å credentials | ‚úÖ | –ù–µ—Ç —É—Ç–µ—á–µ–∫ |
| TCA –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | ‚úÖ | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è |
| Swift 6 compatibility | ‚úÖ | –î–∞ |
| –ö–æ–¥ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω | ‚úÖ | –ë–µ–∑ –æ—à–∏–±–æ–∫ |
| –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ | swift-format compliant |

---

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ merge

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è RTC-63 **–≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞** –∏ –≥–æ—Ç–æ–≤–∞ –∫ –≤–∫–ª—é—á–µ–Ω–∏—é –≤ main. –í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç TCA –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞, —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏.

### üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–¥–ª—è follow-up PR)

1. **RTC-64 (minor)**: –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç –¥–ª—è self-signed certificate flow:
   ```
   OnboardingFeatureTests.acceptSelfSignedCertificateAndRetry()
   ```

2. **RTC-65 (polish)**: –£–ª—É—á—à–∏—Ç—å UX —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö:
   - –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å "timeout" ‚Üí "–ò—Å—Ç–µ–∫–ª–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è"
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å "–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..." –ø—Ä–∏ retry –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏

3. **RTC-66 (docs)**: –û–±–Ω–æ–≤–∏—Ç—å `devdoc/PRD.md` —Ä–∞–∑–¥–µ–ª—ã –ø—Ä–æ UI-—Ç–µ–∫—Å—Ç—ã –∏ HTTP warning, —á—Ç–æ–±—ã —Å–æ–≤–ø–∞–¥–∞–ª–∏ —Å —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

4. **RTC-67 (coverage)**: –î–æ–±–∞–≤–∏—Ç—å exponential backoff —Ç–µ—Å—Ç –≤ `ServerConnectionProbe` unit-—Ç–µ—Å—Ç—ã

### ‚ú® –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

**85/100** ‚Äî –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –≥–æ—Ç–æ–≤–æ –∫ production, –º–∏–Ω–æ—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã –≤ follow-up.

---

## üìö –§–∞–π–ª—ã, –ø–æ–¥–≤–µ—Ä–≥–Ω—É—Ç—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–µ

- ‚úÖ `Remission/Features/Onboarding/OnboardingFeature.swift` (479 —Å—Ç—Ä–æ–∫)
- ‚úÖ `Remission/Views/Onboarding/OnboardingView.swift` (196 —Å—Ç—Ä–æ–∫)
- ‚úÖ `Remission/Views/Onboarding/TransmissionTrustPromptView.swift` (117 —Å—Ç—Ä–æ–∫)
- ‚úÖ `Remission/ServerConnectionProbe.swift` (115 —Å—Ç—Ä–æ–∫)
- ‚úÖ `Remission/HttpWarningPreferencesStore.swift` (97 —Å—Ç—Ä–æ–∫)
- ‚úÖ `Remission/TransmissionTrustStoreClient.swift` (35 —Å—Ç—Ä–æ–∫)
- ‚úÖ `Remission/Features/ServerDetail/ServerDetailFeature.swift` (~120 —Å—Ç—Ä–æ–∫)
- ‚úÖ `Remission/Views/ServerDetail/ServerDetailView.swift` (60 —Å—Ç—Ä–æ–∫)
- ‚úÖ `Remission/Domain/ServerConfig.swift` (extension —Å httpWarningFingerprint)
- ‚úÖ `RemissionTests/OnboardingFeatureTests.swift` (232 —Å—Ç—Ä–æ–∫, 4 —Ç–µ—Å—Ç–∞)
- ‚úÖ `RemissionTests/ServerDetailFeatureTests.swift` (93 —Å—Ç—Ä–æ–∫, 1 —Ç–µ—Å—Ç)
- ‚úÖ `Remission/AppDependencies.swift` (–æ–±–Ω–æ–≤–ª—ë–Ω)

**–í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~1,400 —Å—Ç—Ä–æ–∫ production + ~325 —Å—Ç—Ä–æ–∫ —Ç–µ—Å—Ç–æ–≤

---

**–ê–≤—Ç–æ—Ä –æ—Ç—á—ë—Ç–∞**: AI QA Assistant  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 9 –Ω–æ—è–±—Ä—è 2025 –≥., 23:00 UTC
